/*! jQuery GetGists Plugin - v0.1.0 - 2012-10-09
* https://github.com/tvooo/getgists
* Copyright (c) 2012 Tim von Oldenburg; Licensed MIT */
(function(e){"use strict";var t=window.console;document._write=document.write,document.write=function(e){if(e.indexOf('<div id="gist-')!==0){e.indexOf("https://gist.github.com/stylesheets/gist/embed.css")===-1&&document._write(e);return}var t=/<div id=\"gist-(\d+)/.exec(e)[1],n=document.querySelector('script[src="https://gist.github.com/'+t+'.js"]'),r=document.createElement("div");r.innerHTML=e,n.parentNode.innerHTML=e};var n=function(){e('link[href="https://gist.github.com/stylesheets/gist/embed.css"]').length||e("<link>").attr({rel:"stylesheet",href:"https://gist.github.com/stylesheets/gist/embed.css"}).appendTo(e("head"))},r=function(t,n){var r="";t.user?r="/users/"+t.user+"/gists":e.error("No user name provided."),e.ajax({method:"get",dataType:"json",url:"https://api.github.com"+r,success:function(r,i,o){n(e.grep(r,function(e,n){return s(e,t)}).slice(0,t.count))},error:function(e,t,n){return n}})},i=function(t){e.error("Not yet implemented")},s=function(e,t){if(t.language!==undefined&&typeof t.language=="string"&&t.language.length){var n=!1;for(var r in e.files)e.files[r].language&&e.files[r].language.toLowerCase()===t.language.toLowerCase()&&(n=!0);if(!n)return!1}return t.keyword!==undefined&&typeof t.keyword=="string"&&t.keyword.length&&e.description.toLowerCase().indexOf(t.keyword.toLowerCase())===-1?!1:!0};e.fn.getGists=function(t){if(this instanceof e){if(u[t])return u[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return u.embed.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.fn.getGists")}else{if(o[t])return o[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return o.list.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.fn.getGists")}};var o={list:function(t){var n=e.extend({},e.fn.getGists.defaults,t);return r(n,function(t){n.success?n.success(t):e.error('$.getGists( options ) requires a "success" callback')}),e}},u={embed:function(t){var i=e.extend({},e.fn.getGists.defaults,t);return n(),this.each(function(){r(i,e.proxy(function(t,n){t.forEach(e.proxy(function(t){var n=document.createElement("script");n.type="text/javascript",n.src="https://gist.github.com/"+t.id+".js";var r=i.outputElem==="li"?e("<li>"):e("<div>");i.outputClass&&r.addClass(i.outputClass),r.get(0).appendChild(n),this.appendChild(r.get(0))},this)),i.success&&i.success()},this))})}};e.fn.getGists.defaults={count:10,outputElem:"div"}})(jQuery);