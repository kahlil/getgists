/*! jQuery GetGists Plugin - v0.1.0 - 2012-10-08
* https://github.com/tvooo/getgists
* Copyright (c) 2012 Tim von Oldenburg; Licensed MIT */
(function(e){"use strict";var t=window.console;document._write=document.write,document.write=function(e){if(e.indexOf('<div id="gist-')!==0){e.indexOf("https://gist.github.com/stylesheets/gist/embed.css")===-1&&document._write(e);return}var t=/<div id=\"gist-(\d+)/.exec(e)[1],n=document.querySelector('script[src="https://gist.github.com/'+t+'.js"]'),r=document.createElement("div");r.innerHTML=e,n.parentNode.innerHTML=e};var n=function(){e('link[href="https://gist.github.com/stylesheets/gist/embed.css"]').length===0&&e("<link>").attr({rel:"stylesheet",href:"https://gist.github.com/stylesheets/gist/embed.css"}).appendTo(e("head"))},r=function(t,n){var r="";t.user!==""&&(r="/users/"+t.user+"/gists"),e.ajax({method:"get",dataType:"json",url:"https://api.github.com"+r,success:function(e,r,i){n(s(e,t))},error:function(e,t,n){return n}})},i=function(e){throw"Not yet implemented"},s=function(e,t){var n=[];for(var r=0,i=e.length,s=e[0];r<i;s=e[r],r++){if(t.language&&typeof t.language=="string"&&t.language.length>0){var o=!1;for(var u in s.files)s.files[u].language&&s.files[u].language.toLowerCase()===t.language.toLowerCase()&&(o=!0);if(!o)continue}if(t.keyword&&typeof t.keyword=="string"&&t.keyword.length>0&&s.description.toLowerCase().indexOf(t.keyword.toLowerCase())===-1)continue;if(t.count&&typeof t.count=="number"&&!isNaN(t.count)&&n.length>=t.count)continue;n.push(s)}return n};e.getGists=function(t){if(o[t])return o[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return o.list.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.gist")},e.fn.getGists=function(t){if(u[t])return u[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return u.embed.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.fn.gist")};var o={list:function(t){var n=e.extend({},e.getGists.defaults,t);return r(n,function(e){n.success&&n.success(e)}),e}},u={embed:function(t){var i=e.extend({},e.fn.getGists.defaults,t);return n(),this.each(function(){r(i,e.proxy(function(t,n){t.forEach(e.proxy(function(t){var n=document.createElement("script");n.type="text/javascript",n.src="https://gist.github.com/"+t.id+".js";var r=i.outputElem==="li"?e("<li>"):e("<div>");i.outputClass&&r.addClass(i.outputClass),r.get(0).appendChild(n),this.appendChild(r.get(0))},this)),i.success&&i.success()},this))})}};e.fn.getGists.defaults={count:10,outputElem:"div"},e.getGists.defaults={count:10}})(jQuery);